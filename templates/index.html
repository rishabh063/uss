<!DOCTYPE html>
<html>
<head>
    <title>Upload File</title>
</head>
<body>
    <h1>Upload File</h1>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('upload') }}">
        <label for="faceImage">Face Image:</label>
        <input type="file" name="face" accept="image/jpeg">
        <br><br>
        <label for="dob">Enter Date of Birth in the format ddmmyyyy:</label>
        <input type="number" id="passphrase" name="passphrase" max="99999999">
        <br><br>
        <label for="fileUpload">File Upload:</label>
        <input type="file" name="file">
        <br><br>
        <label for="contentType">Content Type:</label>
        <select id="contentType" name="contentType">
            <option value="image/png">PNG</option>
            <option value="image/jpeg">JPEG</option>
            <option value="image/pdf">PDF</option>
        </select>
        <br><br>
        <input type="submit" value="Upload">
    </form>


    <h1>Get File</h1>
    <button onclick="toggleCamera()">Toggle Camera</button>
<form method="POST" enctype="multipart/form-data" action="{{ url_for('collect') }}">
    <div id="container">
        <video autoplay="true" id="videoElement"></video>
    </div>
    <br><br>
    <label for="passphrase">Passphrase:</label>
    <input type="text" id="passphrase" name="passphrase">
    <br><br>
    <br><br>
    <input type="submit" value="Collect">
</form>

<div id="videoContainer">
    <video autoplay="true" id="videoElement"></video>
</div>

<script>
    var video = document.querySelector("#videoElement");
    var videoContainer = document.querySelector("#videoContainer");
    var stream = null;

    if (navigator.mediaDevices.getUserMedia) {
        navigator.mediaDevices.getUserMedia({ video: true })
            .then(function (cameraStream) {
                video.srcObject = cameraStream;
                stream = cameraStream;
            })
            .catch(function (err) {
                console.log("Something went wrong!", err);
            });
    }

    function toggleCamera() {
        if (stream) {
            // Stop camera
            stream.getTracks().forEach(track => track.stop());
            stream = null;
            video.pause();
            videoContainer.style.display = "hidden";
        } else {
            // Start camera
            navigator.mediaDevices.getUserMedia({ video: true })
                .then(function (cameraStream) {
                    video.srcObject = cameraStream;
                    stream = cameraStream;
                    video.play();
                    videoContainer.style.display = "block";
                })
                .catch(function (err) {
                    console.log("Something went wrong!", err);
                });
        }
    }
</script>





</body>
</html>
